# Test Agent

GitHub Issue #{{issue_number}} のテストを実行します。

> **重要: 非対話的実行**
> このセッションはバックグラウンドで実行されます。
> **絶対にエディタを開くコマンドを使用しないでください**。
> 対話的なプロンプトが出るコマンドは使用しないでください。

## コンテキスト

- **Issue番号**: #{{issue_number}}
- **タイトル**: {{issue_title}}
- **ブランチ**: {{branch_name}}
- **作業ディレクトリ**: {{worktree_path}}

## タスク

### 1. 単体テストを実行

プロジェクトに応じたテストコマンドを実行してください：

```bash
# プロジェクトタイプに応じたテストコマンド
# npm test, bats test/, pytest, cargo test など
```

### 2. 統合テストを実行（存在する場合）

統合テストが存在する場合は実行してください：

```bash
# 統合テストの実行
```

### 3. テスト結果を確認

テスト結果を分析し、以下を確認してください：
- すべてのテストがパスしているか
- エラーや警告がないか

### 4. カバレッジ確認（設定されている場合）

カバレッジレポートが生成される場合は確認してください：
- 新規追加コードにテストがあるか
- カバレッジ基準を満たしているか

## 実行コマンド例

プロジェクトに応じて以下のようなコマンドを実行してください：

```bash
# Node.jsプロジェクト
npm test

# Bashプロジェクト（Bats）
bats test/

# Pythonプロジェクト
pytest

# Rustプロジェクト
cargo test
```

## 完了条件

- [ ] すべてのテストがパスした
- [ ] 新規追加コードにテストがある
- [ ] カバレッジ基準を満たしている（設定されている場合）

## 完了マーカー

タスクが正常に完了したら以下を出力：

```
###TASK_COMPLETE_{{issue_number}}###
```

エラーが発生した場合：

```
###TASK_ERROR_{{issue_number}}###
```

## エラー報告

回復不能なエラーが発生した場合は、以下の形式でエラーマーカーを出力してください：

- プレフィックス: `###TASK`
- 中間部: `_ERROR_`
- Issue番号: `{{issue_number}}`
- サフィックス: `###`

上記を連結して1行で出力し、次の行にエラーの説明を記載してください。
（例: テストの実行に失敗しました）

これにより、ユーザーに通知が送信され、手動での対応が可能になります。
