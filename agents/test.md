変更に対してテストを実行し、品質を検証します。`gh pr create` はこのステップでは実行しないでください。

#### 1. 変更内容の把握
```bash
git diff main...HEAD --name-only
```
変更されたファイルと、**そのファイルの出力を使う側（呼び出し元）** を特定してください。

#### 2. テスト実行（⚠️ 注意）

**このステップでは「テストコードの追加・修正」を行います。自動品質チェック（shellcheck/bats）は後続の `run:` ステップで自動実行されます。**

- ✅ **やること**: 不足しているテストを追加・修正し、手元で簡易的に動作確認
- ❌ **やらないこと**: `shellcheck -x scripts/*.sh lib/*.sh` や `./scripts/test.sh` などの**完全な品質チェックを手動で実行しない**

自動品質チェックはPHASE_COMPLETEマーカー出力後に**自動で実行**されます。手動で実行するとワークフローがスキップされてしまいます。

簡易確認のみ行い、問題があれば修正してコミットしてください：
```bash
# 簡易確認例（必須ではない）
bats test/specific-test.bats  # 特定のテストのみ確認
```

#### 3. 静的解析（⚠️ 注意）

**ShellCheckなどの静的解析は `run:` ステップで自動実行されます。手動で実行しないでください。**

エディタのLint機能やIDEで確認する程度に留め、完全な解析は自動化に任せてください。

#### 4. テスト失敗時の対応
失敗した場合は**実装を修正**してください。テストをスキップ・削除して通すのではなく、実装側を直します。

#### 5. テストカバレッジの確認と追加
不足しているテストを追加してください。特に重視する観点：
1. **境界値**: 空文字列、改行を含む文字列、特殊文字
2. **コンポーネント間のデータ受け渡し**: 関数Aの出力を関数Bに渡した時の動作
3. **変更した関数の出力を消費する側**のテスト

#### 6. 修正とコミット
```bash
git add -A
git commit -m "test: add/fix tests for #{{issue_number}}" -m "Refs #{{issue_number}}"
```

#### 完了条件
- [ ] 全テストスイートがパスした
- [ ] 静的解析がパスした
- [ ] 変更の影響を受けるコンポーネントのテストも確認した
