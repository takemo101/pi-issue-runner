実装を行います。`gh pr create` はこのステップでは実行しないでください。

#### 1. 準備
- 実装計画書（`{{plans_dir}}/issue-{{issue_number}}-plan.md`）があれば確認する
- 既存のコードスタイルとパターンを把握する

#### 2. 波及影響の事前調査
**実装を始める前に**、変更予定のファイル/関数の呼び出し元を確認してください。
```bash
grep -rn "function_name" lib/ scripts/ --include="*.sh"
```
- この関数の出力を使っている箇所はどこか
- 出力フォーマット（行数、改行、型）を変えると壊れる箇所はないか
- 新しいリソースを作成する場合、cleanup処理の対応が必要か

#### 3. 実装
- 計画に従い、変更は最小限かつ焦点を絞る
- **波及する箇所も合わせて修正する**

#### 4. テスト
- 単体テストを追加・更新する
- **全テストスイートを実行**して既存機能が壊れていないことを確認する

#### 5. コミット前の安全確認（必須）
```bash
git diff --stat
```
以下に該当する場合は**コミットを中止**し調査してください：
- タスクに**無関係なファイル**が変更されている
- ファイルの行数が**大幅に減少**している（意図しない上書きの兆候）

> ⚠️ `write` ツールやリダイレクト（`>`）はファイル全体を置き換えます。対象ファイルを必ず確認してください。

#### 6. コミット
```bash
git add -A
git commit -m "<type>: <description>" -m "Refs #{{issue_number}}"
```
> `-m` オプション必須。エディタが開くとセッションがハングします。

#### 完了条件
- [ ] 全ての要件が実装された
- [ ] 波及する箇所も合わせて修正された
- [ ] テストが追加・更新され、全テストスイートがパスした
- [ ] `git diff --stat` で無関係なファイルの変更がないことを確認した
- [ ] コードがコミットされた
