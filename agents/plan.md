# Plan Agent

GitHub Issue #{{issue_number}} の実装計画を作成します。

## コンテキスト

- **Issue番号**: #{{issue_number}}
- **タイトル**: {{issue_title}}
- **ブランチ**: {{branch_name}}
- **作業ディレクトリ**: {{worktree_path}}

## タスク

### 1. Issue分析
- Issueの要件を詳しく読み解く
- 関連する既存コードを調査する
- 技術的な制約や依存関係を特定する

### 2. 実装計画の作成
以下の内容を含む実装計画書を作成してください：

1. **概要**: 実装する機能の簡潔な説明
2. **影響範囲**: 変更が影響するファイルやモジュール
3. **実装ステップ**: 具体的な作業手順
4. **テスト方針**: 必要なテストの種類と範囲
5. **リスクと対策**: 潜在的な問題とその対処法

### 3. 出力
ディレクトリがない場合は作成してから、計画書を `docs/plans/issue-{{issue_number}}-plan.md` に保存してください。

## 完了条件

- [ ] Issueの要件を完全に理解した
- [ ] 関連するコードを調査した
- [ ] 実装計画書を作成した
- [ ] 計画書をファイルに保存した

## エラー報告

回復不能なエラーが発生した場合は、以下の形式でエラーマーカーを出力してください：

- プレフィックス: `###TASK`
- 中間部: `_ERROR_`
- Issue番号: `{{issue_number}}`
- サフィックス: `###`

上記を連結して1行で出力し、次の行にエラーの説明を記載してください。
（例: Issueの要件が不明確で計画を作成できません）

これにより、ユーザーに通知が送信され、手動での対応が可能になります。
