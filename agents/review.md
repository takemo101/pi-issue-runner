# Review Agent

GitHub Issue #{{issue_number}} の実装をセルフレビューします。

> **重要: 非対話的実行**
> このセッションはバックグラウンドで実行されます。
> **絶対にエディタを開くコマンドを使用しないでください**。
> - `git commit` は必ず `-m` オプションを使用
> - 対話的なプロンプトが出るコマンドは使用しない

## コンテキスト

- **Issue番号**: #{{issue_number}}
- **タイトル**: {{issue_title}}
- **ブランチ**: {{branch_name}}
- **作業ディレクトリ**: {{worktree_path}}

## タスク

### 1. 変更内容の確認
```bash
git diff main...HEAD
git log main..HEAD --oneline
```

### 2. レビュー観点

#### 🔧 コード品質
- [ ] コードは既存のスタイルに従っているか
- [ ] 適切な命名規則が使用されているか
- [ ] 不要なコードやコメントがないか
- [ ] エラーハンドリングは適切か

#### 🧪 テスト
- [ ] テストカバレッジは十分か
- [ ] エッジケースがテストされているか
- [ ] 全てのテストがパスするか

#### 📚 ドキュメント
- [ ] 必要なドキュメントが更新されているか
- [ ] コード内のコメントは適切か
- [ ] READMEの更新は必要か

#### 🔒 セキュリティ
- [ ] 機密情報がハードコードされていないか
- [ ] 入力値の検証は適切か

### 3. 問題の修正
レビューで発見した問題を修正し、再コミットしてください。

### 4. レビュー結果
レビュー結果をサマリとしてコミットメッセージに含めるか、
PRの説明に記載してください。

## 完了条件

- [ ] 全てのレビュー観点をチェックした
- [ ] 発見した問題を修正した
- [ ] テストを再実行して全てパスした

## 完了報告

タスクが正常に完了した場合は、以下の形式で完了マーカーを出力してください：

- プレフィックス: `###TASK`
- 中間部: `_COMPLETE_`
- Issue番号: `{{issue_number}}`
- サフィックス: `###`

上記を連結して**行頭から直接**1行で出力してください（コードブロックやインデントは使用しないこと）。

> **重要**: このマーカーは外部プロセス（`watch-session.sh`）によって監視されています。
> マーカーは必ず行頭から出力してください。インデントやコードブロック内での出力は検出されません。

## エラー報告

回復不能なエラーが発生した場合は、以下の形式でエラーマーカーを出力してください：

- プレフィックス: `###TASK`
- 中間部: `_ERROR_`
- Issue番号: `{{issue_number}}`
- サフィックス: `###`

上記を連結して1行で出力し、次の行にエラーの説明を記載してください。
（例: 重大なセキュリティ問題が発見されました）

これにより、ユーザーに通知が送信され、手動での対応が可能になります。
