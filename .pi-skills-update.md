# Skill Scripts Updates

## ShellCheck Warning Fixes - Issue #683

### Summary

Fixed ShellCheck warnings in skill scripts located in the composer-workflow repository.

### Changes Made

#### PR Created and Merged
- **Repository**: takemo101/compose-workflow
- **PR**: https://github.com/takemo101/compose-workflow/pull/2
- **Commit**: aefbe93

#### Files Modified

1. **ci-workflow/scripts/ci-wait.sh**
   - SC2086: Double quote `$TIMEOUT`

2. **github-issue-dependency/scripts/issue-dependency.sh**
   - SC2016: Add shellcheck disable comment for GraphQL variables

3. **github-issue-state-management/scripts/issue-state.sh**
   - SC2086: Double quote `$MAX_RETRIES` and `$RETRY_DELAY`
   - SC2001: Use parameter expansion and add disable comments for sed

4. **pr-merge-workflow/scripts/pr-merge-full.sh**
   - SC2034: Remove unused `REPO_ROOT` variable

5. **release-workflow/scripts/release.sh**
   - SC2155: Separate declaration and assignment
   - SC2001: Add shellcheck disable for sed usage
   - SC2162: Use `read -r` instead of `read`

### Verification

All scripts pass `shellcheck -x`:
```bash
shellcheck -x .pi/skills/ci-workflow/scripts/ci-wait.sh
shellcheck -x .pi/skills/github-issue-dependency/scripts/issue-dependency.sh
shellcheck -x .pi/skills/github-issue-state-management/scripts/issue-state.sh
shellcheck -x .pi/skills/pr-merge-workflow/scripts/pr-merge-full.sh
shellcheck -x .pi/skills/release-workflow/scripts/release.sh
```

## Shebang Update - Issue #684

### Summary

Updated all skill script shebangs from `#!/bin/bash` to `#!/usr/bin/env bash` for better portability.

### Changes

The following skill scripts in `.pi/skills/*/scripts/*.sh` have been updated:

1. ci-workflow/scripts/ci-wait.sh
2. create-worktree/scripts/create_worktree.sh
3. delete-environment/scripts/delete_env.sh
4. github-graphql-api/scripts/add-sub-issue.sh
5. github-issue-dependency/scripts/issue-dependency.sh
6. github-issue-state-management/scripts/issue-state.sh
7. pr-and-cleanup/scripts/pr_and_cleanup.sh
8. pr-merge-workflow/scripts/pr-merge-full.sh
9. release-workflow/scripts/release.sh
10. sanitizer/scripts/sanitize.sh

### Why

- `#!/bin/bash` assumes bash is always at `/bin/bash`, which is not true on all systems
- `#!/usr/bin/env bash` searches PATH for bash, making scripts more portable
- This aligns with the convention already used in pi-issue-runner's main scripts

### Reference

- Composer Workflow PR: https://github.com/takemo101/compose-workflow/pull/1
- Commit: 8ae04c221e9b93fc838082af47682e6e856ee1c9

## Orphaned Test Files Removal - Issue #700

### Summary

Removed orphaned test files in `test/skills/` directory that tested external skill scripts managed in a separate repository.

### Background

The `test/skills/` directory contained test files for scripts located in `.pi/skills/`, but these scripts are not part of the `pi-issue-runner` project. They are maintained in the external repository `takemo101/compose-workflow`.

All 141 test cases were in a skipped state because the target scripts don't exist in this project, making these test files orphaned and unnecessary.

### Changes Made

Removed the following test directories (141 total test cases):

1. `test/skills/ci-workflow/` (11 tests)
2. `test/skills/create-worktree/` (12 tests)
3. `test/skills/delete-environment/` (10 tests)
4. `test/skills/github-graphql-api/` (14 tests)
5. `test/skills/github-issue-dependency/` (12 tests)
6. `test/skills/github-issue-state-management/` (15 tests)
7. `test/skills/pr-and-cleanup/` (14 tests)
8. `test/skills/pr-merge-workflow/` (16 tests)
9. `test/skills/release-workflow/` (17 tests)
10. `test/skills/sanitizer/` (20 tests)

The empty `test/skills/` directory was also removed.

### Rationale

- **Project Scope**: These skills are external to `pi-issue-runner` and should be tested in their own repository
- **No Functionality Loss**: All tests were already skipping; no actual functionality was tested
- **Cleaner Codebase**: Removing orphaned files reduces maintenance overhead and confusion
- **Faster Test Execution**: Eliminating unnecessary test files improves CI/CD performance

### External Skill Testing

These skill scripts are properly tested in their source repository:
- **Repository**: takemo101/compose-workflow
- **Test Location**: Tests are maintained alongside the actual scripts

### Impact

- ✅ Test suite is now focused on `pi-issue-runner` core functionality only
- ✅ All remaining tests pass successfully
- ✅ No breaking changes to existing functionality
- ✅ Improved test execution speed
