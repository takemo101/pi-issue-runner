# Issue #173 Implementation Plan

## 概要

テスト一括実行スクリプト `scripts/test.sh` を新規作成する。
これにより、テスト実行の利便性向上とCI/CDでの標準的なエントリポイントを提供する。

## 影響範囲

### 新規作成
- `scripts/test.sh` - テスト一括実行スクリプト

### 更新
- `AGENTS.md` - 開発コマンドのテスト実行部分を更新
- `README.md` - 開発セクションにテストスクリプトの説明を追加

## 実装ステップ

### 1. scripts/test.sh の作成

機能要件:
- 全テスト (`test/*_test.sh`) の一括実行
- パターン指定による特定テストのフィルタリング
- テスト結果のサマリー表示
- `-v, --verbose`: 詳細ログ表示
- `-f, --fail-fast`: 最初の失敗で終了
- `-h, --help`: ヘルプ表示

実装パターン:
- 既存スクリプト (`list.sh`) の構造に従う
- `set -euo pipefail` で開始
- `SCRIPT_DIR` の設定
- `usage()` 関数でヘルプを定義
- `main()` 関数でロジックを実装

### 2. AGENTS.md の更新

変更箇所: 開発コマンドセクション
- ワンライナーの代わりに `./scripts/test.sh` を記載
- パターン指定の例を追加

### 3. README.md の更新

変更箇所: 開発関連セクション（もしあれば）
- テストスクリプトの使い方を追加

## テスト方針

手動テストで動作確認:
1. `./scripts/test.sh` - 全テスト実行
2. `./scripts/test.sh config` - パターン指定
3. `./scripts/test.sh -f` - fail-fast モード
4. `./scripts/test.sh -v` - verbose モード
5. `./scripts/test.sh -h` - ヘルプ表示
6. `./scripts/test.sh nonexistent` - マッチなしの場合

## リスクと対策

| リスク | 対策 |
|--------|------|
| テストファイルが存在しない場合の挙動 | パターンにマッチするファイルがない場合はメッセージを表示 |
| テストファイルが実行可能でない場合 | `bash "$test_file"` で明示的にbashで実行 |
| 終了コードの管理 | 失敗テスト数を終了コードとして返す（ただし最大255） |

## 完了条件チェックリスト

- [ ] `scripts/test.sh` が作成されている
- [ ] `./scripts/test.sh` で全テストが実行できる
- [ ] パターン指定で特定のテストのみ実行できる
- [ ] テスト結果のサマリーが表示される
- [ ] AGENTS.md が更新されている
- [ ] README.md が更新されている
