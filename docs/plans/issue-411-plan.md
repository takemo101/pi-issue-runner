# Issue #411 実装計画

## 概要
`docs/configuration.md` に分散しているテンプレート変数の説明を1箇所にまとめ、各変数の使用可能コンテキストを明確にします。

## 問題分析

### 現在の問題
1. テンプレート変数の説明が2箇所に分散している
   - `agent` セクション: `{{command}}`, `{{args}}`, `{{prompt_file}}`
   - `agents` セクション: `{{issue_number}}`, `{{issue_title}}`, `{{branch_name}}`, `{{worktree_path}}`, `{{step_name}}`, `{{workflow_name}}`
2. どの変数がどのコンテキストで使えるかが不明確
3. `lib/template.sh` の実装と整合しているが、読者が混乱する可能性がある

### 変数の実際の使用コンテキスト

#### エージェントコマンドテンプレート（`agent.template`）で使用
- `{{command}}` - エージェントコマンド
- `{{args}}` - 引数（agent.args + --agent-args）
- `{{prompt_file}}` - プロンプトファイルのパス

#### エージェントプロンプトテンプレート（`agents/*.md`）で使用
- `{{issue_number}}` - GitHub Issue番号
- `{{issue_title}}` - Issueタイトル
- `{{branch_name}}` - ブランチ名
- `{{worktree_path}}` - worktreeのパス
- `{{step_name}}` - 現在のステップ名
- `{{workflow_name}}` - ワークフロー名

## 実装ステップ

1. **新しいセクション作成**: 「テンプレート変数リファレンス」セクションを作成
2. **2箇所の既存セクションを削除**: 
   - `agent` セクション内のテンプレート変数テーブル
   - `agents` セクション内のテンプレート変数テーブル
3. **コンテキスト明記**: 各変数に使用可能コンテキストを明記
4. **相互参照**: 削除した箇所から新しいセクションへの参照を追加

## 影響範囲

- `docs/configuration.md` のみ

## テスト方針

- ドキュメントの変更のみなので、手動で内容を確認
- `lib/template.sh` の実装と一致していることを確認

## リスクと対策

- **リスク**: 既存のドキュメント構造を変更することで、読者が迷う可能性がある
- **対策**: 削除した箇所から新しいセクションへの明確な参照を残す
