# pi-issue-runner è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
# è©³ç´°: https://github.com/takemo101/pi-issue-runner/blob/main/docs/configuration.md

# =====================================
# Worktreeè¨­å®š
# =====================================
worktree:
  # worktreeã®ä½œæˆå…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  base_dir: ".worktrees"

  # worktreeä½œæˆæ™‚ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
  copy_files:
    - .env
    - .env.local
    - .envrc

# =====================================
# tmuxè¨­å®š
# =====================================
tmux:
  # ã‚»ãƒƒã‚·ãƒ§ãƒ³åã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆä¾‹: pi-issue-42ï¼‰
  session_prefix: "pi"

  # tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§èµ·å‹•ã™ã‚‹ã‹
  start_in_session: true

# =====================================
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š
# =====================================
agent:
  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¿ã‚¤ãƒ—: pi | claude | opencode | custom
  # ç©ºã®å ´åˆã¯ pi ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚’ä½¿ç”¨ï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰
  type: "pi"

  # ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ï¼ˆtype: custom ã®å ´åˆã«ä½¿ç”¨ï¼‰
  # command: "my-agent"

  # ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆtype: custom ã®å ´åˆã«ä½¿ç”¨ï¼‰
  # åˆ©ç”¨å¯èƒ½ãªå¤‰æ•°: {{command}}, {{args}}, {{prompt_file}}
  # template: "{{command}} {{args}} < {{prompt_file}}"

  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ¸¡ã™è¿½åŠ å¼•æ•°
  # args:
  #   - --model
  #   - claude-sonnet-4-20250514

# =====================================
# piã‚³ãƒãƒ³ãƒ‰è¨­å®šï¼ˆå¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹å­˜ï¼‰
# =====================================
pi:
  # piã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ã‚¹ï¼ˆagent.type ãŒç©ºã®å ´åˆã«ä½¿ç”¨ï¼‰
  command: "pi"

  # piã«æ¸¡ã™è¿½åŠ å¼•æ•°ï¼ˆagent.type ãŒç©ºã®å ´åˆã«ä½¿ç”¨ï¼‰
  # args:
  #   - --model
  #   - claude-sonnet-4-20250514

# =====================================
# GitHubè¨­å®š
# =====================================
github:
  # Issueã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹
  include_comments: true

  # æœ€å¤§ã‚³ãƒ¡ãƒ³ãƒˆæ•°ï¼ˆ0 = ç„¡åˆ¶é™ï¼‰
  max_comments: 10

# =====================================
# ä¸¦åˆ—å®Ÿè¡Œè¨­å®š
# =====================================
parallel:
  # åŒæ™‚å®Ÿè¡Œæ•°ã®ä¸Šé™ï¼ˆ0 = ç„¡åˆ¶é™ï¼‰
  max_concurrent: 5

# =====================================
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š
# =====================================
workflow:
  # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å
  name: default

  # å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—
  steps:
    - plan
    - implement
    - review
    - merge

# =====================================
# è¨ˆç”»æ›¸è¨­å®š
# =====================================
plans:
  # ä¿æŒã™ã‚‹è¨ˆç”»æ›¸ã®ä»¶æ•°ï¼ˆ0 = å…¨ã¦ä¿æŒï¼‰
  keep_recent: 10

  # è¨ˆç”»æ›¸ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  dir: "docs/plans"

# =====================================
# Hookè¨­å®š
# =====================================
hooks:
  # æˆåŠŸæ™‚ã®é€šçŸ¥
  on_success: |
    osascript -e 'display notification "Issue #{{issue_number}} ãŒå®Œäº†ã—ã¾ã—ãŸ" with title "Pi Issue Runner" subtitle "âœ… å®Œäº†" sound name "Glass"'

  # ã‚¨ãƒ©ãƒ¼æ™‚ã®é€šçŸ¥
  on_error: |
    osascript -e 'display notification "{{error_message}}" with title "Pi Issue Runner" subtitle "âŒ Issue #{{issue_number}} ã‚¨ãƒ©ãƒ¼" sound name "Basso"'

  # ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤ã§æœ‰åŠ¹åŒ–ï¼‰
  on_start: |
    osascript -e 'display notification "Issue #{{issue_number}} ã‚’é–‹å§‹ã—ã¾ã—ãŸ" with title "Pi Issue Runner" subtitle "ğŸš€ é–‹å§‹" sound name "Pop"'

  # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å¾Œï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤ã§æœ‰åŠ¹åŒ–ï¼‰
  on_cleanup: |
    echo "Cleanup completed for Issue #{{issue_number}}"
