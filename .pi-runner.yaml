# pi-issue-runner è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
# è©³ç´°: https://github.com/takemo101/pi-issue-runner/blob/main/docs/configuration.md

# =====================================
# Worktreeè¨­å®š
# =====================================
worktree:
  # worktreeã®ä½œæˆå…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  base_dir: ".worktrees"

  # worktreeä½œæˆæ™‚ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
  copy_files:
    - .env
    - .env.local
    - .envrc

# =====================================
# tmuxè¨­å®š
# =====================================
tmux:
  # ã‚»ãƒƒã‚·ãƒ§ãƒ³åã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆä¾‹: pi-issue-42ï¼‰
  session_prefix: "pi"

  # tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§èµ·å‹•ã™ã‚‹ã‹
  start_in_session: true

# =====================================
# piã‚³ãƒãƒ³ãƒ‰è¨­å®š
# =====================================
pi:
  # piã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ã‚¹
  command: "pi"

  # piã«æ¸¡ã™è¿½åŠ å¼•æ•°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤ï¼‰
  # args:
  #   - --model
  #   - claude-sonnet-4-20250514

# =====================================
# ä¸¦åˆ—å®Ÿè¡Œè¨­å®š
# =====================================
parallel:
  # åŒæ™‚å®Ÿè¡Œæ•°ã®ä¸Šé™ï¼ˆ0 = ç„¡åˆ¶é™ï¼‰
  max_concurrent: 5

# =====================================
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š
# =====================================
workflow:
  # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å
  name: default

  # å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—
  steps:
    - plan
    - implement
    - review
    - merge

# =====================================
# è¨ˆç”»æ›¸è¨­å®š
# =====================================
plans:
  # ä¿æŒã™ã‚‹è¨ˆç”»æ›¸ã®ä»¶æ•°ï¼ˆ0 = å…¨ã¦ä¿æŒï¼‰
  keep_recent: 10
  
  # è¨ˆç”»æ›¸ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  dir: "docs/plans"

# =====================================
# Hookè¨­å®š
# =====================================
hooks:
  # æˆåŠŸæ™‚ã®é€šçŸ¥
  on_success: |
    osascript -e 'display notification "Issue #{{issue_number}} ãŒå®Œäº†ã—ã¾ã—ãŸ" with title "Pi Issue Runner" subtitle "âœ… å®Œäº†" sound name "Glass"'

  # ã‚¨ãƒ©ãƒ¼æ™‚ã®é€šçŸ¥
  on_error: |
    osascript -e 'display notification "{{error_message}}" with title "Pi Issue Runner" subtitle "âŒ Issue #{{issue_number}} ã‚¨ãƒ©ãƒ¼" sound name "Basso"'

  # ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤ã§æœ‰åŠ¹åŒ–ï¼‰
  on_start: |
    osascript -e 'display notification "Issue #{{issue_number}} ã‚’é–‹å§‹ã—ã¾ã—ãŸ" with title "Pi Issue Runner" subtitle "ğŸš€ é–‹å§‹" sound name "Pop"'

  # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å¾Œï¼ˆã‚³ãƒ¡ãƒ³ãƒˆè§£é™¤ã§æœ‰åŠ¹åŒ–ï¼‰
  on_cleanup: |
    echo "Cleanup completed for Issue #{{issue_number}}"
